%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% LaTeX Example: Project Report
%
% Source: http://www.howtotex.com
%
% Feel free to distribute this example, but please keep the referral
% to howtotex.com
% Date: March 2011 
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% How to use writeLaTeX: 
%
% You edit the source code here on the left, and the preview on the
% right shows you the result within a few seconds.
%
% Bookmark this page and share the URL with your co-authors. They can
% edit at the same time!
%
% You can upload figures, bibliographies, custom classes and
% styles using the files menu.
%
% If you're new to LaTeX, the wikibook is a great place to start:
% http://en.wikibooks.org/wiki/LaTeX
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Edit the title below to update the display in My Documents
%\title{Project Report}
%
%%% Preamble
\documentclass[paper=a4, fontsize=11pt]{scrartcl}
\usepackage[T1]{fontenc}
\usepackage{fourier}

\usepackage[english]{babel}                                                         % English language/hyphenation
\usepackage[protrusion=true,expansion=true]{microtype}  
\usepackage{amsmath,amsfonts,amsthm} % Math packages
\usepackage[pdftex]{graphicx}   
\usepackage{url}
\usepackage{physics}
\usepackage{siunitx}

%%% Custom sectioning
\usepackage{sectsty}
\allsectionsfont{\centering \normalfont\scshape}


%%% Custom headers/footers (fancyhdr package)
\usepackage{fancyhdr}
\pagestyle{fancyplain}
\fancyhead{}                                            % No page header
\fancyfoot[L]{}                                         % Empty 
\fancyfoot[C]{}                                         % Empty
\fancyfoot[R]{\thepage}                                 % Pagenumbering
\renewcommand{\headrulewidth}{0pt}          % Remove header underlines
\renewcommand{\footrulewidth}{0pt}              % Remove footer underlines
\setlength{\headheight}{13.6pt}


%%% Equation and float numbering
\numberwithin{equation}{section}        % Equationnumbering: section.eq#
\numberwithin{figure}{section}          % Figurenumbering: section.fig#
\numberwithin{table}{section}               % Tablenumbering: section.tab#


%%% Maketitle metadata
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}}     % Horizontal rule

\title{
        %\vspace{-1in}  
        \usefont{OT1}{bch}{b}{n}
        \normalfont \normalsize \textsc{MIT 18.086 Computational Science and Engineering II} \\ [25pt]
        \horrule{0.5pt} \\[0.4cm]
        \huge Computational Fluid Dynamics with Shocks \\
        \horrule{2pt} \\[0.5cm]
}
\author{
        \normalfont                                 \normalsize
        Matthew Vernacchia\\[-3pt]      \normalsize
        \today
}
\date{}


%%% Begin document
\begin{document}
\maketitle
\section{Abstract}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
\subsection{Motivation}
Many engineering problems in the military and transportation sectors involve supersonic fluid flow. A significant phenomenon in many supersonic flow problems is the formation of shock waves. Important design problems, such as a helmets to protect against traumatic brain injury from explosions, rocket nozzles for missiles and launch vehicles, or a spacecraft's reentry trajectory, depend on our ability to model and understand shocks.\\
Analytical solutions exist for some simple problems, and these were the primary engineering analysis tools during the 1940s, 50s and 60s. However, these tools restricted designers to simple geometries and a piecewise understanding of the problem. Consider an aircraft designer asked to predict the shock pattern and drag of a fighter jet in supersonic flight. He could solve the shock pattern from a conical nose and from a diamond-section wing or tail, and add these results together to get a rough estimate of the total vehicle's drag. However, the interaction of these shocks where the wing and fuselage meet would be left to guesswork. And a more complicated wing cross section (i.e. a proper airfoil) would not be possible to solve. Therefore, a drag prediction of useful fidelity would require expensive and time consuming wind tunnel tests.\\
Numerical solutions to fluid flow problems (Computational Fluid Dynamics) now enable engineers to analyze more complicated problems. This allows for the design of higher-performance vehicles. Although wind tunnel testing is often still necessary to calibrate or validate CFD results, the use of CFD means that much fewer physical experiments must be performed. This can substantially reduce the cost and time of development.  


\subsection{Governing Equations}
\subsubsection{Navier-Stokes Equations}
Fluid flow (whether subsonic or supersonic) is governed by the Navier Stokes equations. In $n$ dimensions, these equations contain $4 + n$ unknowns at each point in space and time:
\begin{itemize}
    \item Pressure, $p$
    \item Density, $\rho$
    \item Internal energy, $e$
    \item Temperature, $T$
    \item Velocity, $\vec{u}$
\end{itemize}

There are $4 + n$ equations which relate these variables:

\paragraph{Continuity Equation}
The continuity equation enforces the conservation of mass.
\begin{equation}
    \label{eqn:ns_continuity}
    \pdv{\rho}{t} + \nabla \cdot (\rho \vec{u}) = 0
\end{equation}

\paragraph{Momentum Equations}
The momentum equations (one for each spatial dimension) enforce Newton's Laws. They relate the inertia of the fluid to the pressure, viscous, and external forces.
\begin{equation}
    \label{eqn:ns_momentum}
    \pdv{\vec{u}}{t} + \vec{u} \cdot \nabla \vec{u} = - \frac{1}{\rho} \nabla p + \nu \nabla^2 \vec{u} + \frac{1}{3} \nu \nabla (\nabla \cdot \vec{u}) + \vec{F}
\end{equation}
where $\nu$ is the kinematic viscosity (a property of the fluid) and $\vec{F}$ is an external force applied to the fluid per unit mass.

\paragraph{Energy Equation}
The energy equation enforces the conservation of energy. It relates the change in internal energy of the fluid to pressure work, viscous work, and thermal conduction.
\begin{equation}
    \label{eqn:ns_energy}
    \rho(\pdv{e}{t} + \vec{u} \cdot \nabla e) = - p \nabla \vec{u} + \Phi + \nabla \cdot (k \nabla T)
\end{equation}
where $\Phi$ is a viscous term dependent on the velocity second derivatives of velocity and $\nu$, and $k$ is the thermal conductivity (a property of the fluid).

\paragraph{Thermodynamic Relation}
The thermodynamic relation links the internal energy to the temperature and pressure.
\begin{equation}
    \label{eqn:ns_thermo}
    e = e(T, p)
\end{equation}
For a calorically perfect gas,
\begin{equation}
    e = c_v T
\end{equation}
where $c_v$ is the gas's heat capacity at constant volume. Most real gases can be approximated as calorically perfect over small ranges of temperature.

\paragraph{Equation of State}
The equation of state relates the fluid's pressure, density, and temperature.
\begin{equation}
    \label{eqn:ns_state}
    \rho = \rho(p, T)
\end{equation}
A common equation of state is the ideal gas law:
\begin{equation}
    \rho = \frac{p}{R T}
\end{equation}
where $R$ is the specific gas constant (a property of the fluid). For a gas that is also calorically perfect, the ideal gas law can be written as:
\begin{equation}
    \label{eqn:prhoe}
    \rho = \frac{p}{(\gamma - 1) e}
\end{equation}
where $\gamma = c_p / c_v$ is the ratio of specific heats (a property of the fluid).

\subsubsection{Non-Dimensional Parameters}
Two important non-dimensional parameters define flow regimes where the behavior of the Navier-Stokes equations are different.

\paragraph{Mach Number}
The Mach number is the local velocity normalized by the local speed of sound.
\begin{equation}
    M = \frac{|\vec{u}|}{a}
\end{equation}
where $a$ is the local speed of sound (a function of the temperature and fluid properties). Mach numbers less than 1 are subsonic; while Mach numbers greater than one are supersonic.\\
For subsonic flow, the Navier-Stokes equations are classified as elliptic PDEs, and their solutions are smooth. For supersonic flow, the Navier-Stokes PDEs are parabolic: information does not propagate upstream in the flow, and sharp changes in the solution variables (shocks) can exist.

\paragraph{Reynolds Number}
The Reynolds number gives the relative strength of inertia and viscous forces.
\begin{equation}
    Re = \frac{|\vec{u}| L}{\nu}
\end{equation}
Where $L$ is a length scale of the problem, such as the chord of a wing or the diameter of a pipe.\\
If the Reynolds number is high, then viscous forces are small compared to the inertia of the flow, and can be neglected for certain calculations. This leads to an important simplification of the Navier-Stokes equations.

\subsubsection{Euler Equations}
In the context of fluid dynamics, the Euler equations are a simplification of the Navier-Stokes equations, with no viscosity or thermal conductivity ($\nu = k = 0$). They provide a good approximation of certain high Reynolds number problems. The modified momentum and energy equations are written below. The continuity equation (\ref{eqn:ns_continuity}), thermodynamic relation (\ref{eqn:ns_thermo}), and equation of state (\ref{eqn:ns_state}) did not contain viscosity or conductivity terms, and are therefore unchanged.  

\paragraph{Euler Momentum Equation}
\begin{equation}
    \pdv{\vec{u}}{t} + \vec{u} \cdot \nabla \vec{u} = - \frac{1}{\rho} \nabla p + \vec{F}
\end{equation}

\paragraph{Euler Energy Equation}
\begin{equation}
    \rho(\pdv{e}{t} + \vec{u} \cdot \nabla e) = - p \nabla \vec{u}
\end{equation}

The Euler equations are hyperbolic PDEs.

\subsubsection{Euler Equations in Conservative Form}
The Euler equations can be written in a conservative, vectorized, flux-based form. This form is convenient for numerical techniques. I will present the conservative form in 2 dimensions, but it can also be developed in 1 or 3. I assume a 2D Cartesian coordinate system with spatial directions $x$ and $y$. The state of the fluid is represented by the vector $U$ (not to be confused with the velocity vector, $\vec{u}$):
\begin{equation}
    U = 
    \begin{bmatrix}
        \rho \\
        \rho u \\
        \rho v \\
        E
    \end{bmatrix}
\end{equation}
where:
\begin{itemize}
    \item $u$ and $v$ are the velocity components in the $x$ and $y$ directions. $\vec{u} = [u, v]^T$.
    \item $\rho u$ and $\rho v$ are the momentum per unit volume in the the $x$ and $y$ directions. The have units of mass per area-time (\si{\kilo\gram\per\meter\squared\second} in SI).
    \item $E$ is the total energy per unit volume. $E = \rho (e + \frac{1}{2}(u^2 + v^2))$. $E$ has units of energy per volume, which is equal to units of pressure (in SI, \si{\joule\per\meter\cubed} or \si{\pascal}).
\end{itemize}

Next, define fluxes $F$ and $G$ for the $x$ and $y$ directions:
\begin{equation}
    F = 
        \begin{bmatrix}
            \rho u \\
            \rho u^2 + p \\
            \rho u v \\
            (E + p)u \\
        \end{bmatrix}
\end{equation}
\begin{equation}
    G = 
        \begin{bmatrix}
            \rho v \\
            \rho u v \\
            \rho v^2 + p \\
            (E + p)v \\
        \end{bmatrix}
\end{equation}

The Euler continuity, energy, and momentum equations can be written as:
\begin{equation}
    \pdv{U}{t} + \pdv{F}{x} + \pdv{G}{y} = 0
\end{equation}

Although pressure and temperature are not included in the state vector $U$, they can be uniquely determined from $U$ using the equation of state and thermodynamic relation. In the case of a calorically perfect gas,
\begin{equation}
    p = (\gamma - 1) \left( E - \frac{1}{2} \rho (u^2 + v^2) \right)
\end{equation}

\begin{equation}
    T = \frac{1}{c_v} \left( \frac{E}{\rho} - (u^2 + v^2) \right)
\end{equation}

\subsection{Numerical Techniques}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Implementation}
\subsection{Computation Platform}

\subsection{Solver}
\subsubsection{Time Update: MacCormack Scheme}

\subsubsection{Shock Capturing: Artificial Dissipation}

\subsubsection{Curvilinear Coordinates}

\subsubsection{Boundary Conditions}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Results}
\subsection{Shock Tube}

\subsection{Mach $1.5$ Ramp}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusion}

\end{document}